# 05 데이터베이스 설계와 ER 모델

## 데이터베이스 설계의 개요

- 데이터베이스 설계
  - 개념적 데이터베이스 설계와 물리적 데이터베이스 설계로 구분
  - 개념적 데이터베이스 설계는 실제로 데이터베이스를 어떻게 구현할 것인가와는 독립적으로 정보 사용의 모델을 개발하는 과정
  - 물리적 데이터베이스 설계에서는 물리적인 저장 장치와 접근 방식을 다룸
  - 개념적 데이터베이스 설계 과정에서 조직체(실세계)의 엔티티, 관계, 프로세스, 무결성 제약조건 등을 나타내는 추상화 모델을 구축
  - 엔티티는 서로 구분이 되면서 조직체에서 데이터베이스에 나타내려는 객체(사람, 장소, 사물 등)를 의미
  - 관계는 두 개 이상의 엔티티들 간의 연관을 나타냄
  - 프로세스는 관련된 활동을 나타냄
  - 무결성 제약조건은 데이터의 정확성과 비즈니스 규칙을 의미

- 개념적 수준의 모델 
  - 특정 데에터 모델과 독립적으로 응용 세계를 모델링할 수 있도록 함
  - 데이터베이스 구조나 스키마를 하향식으로 개발할 수 있기 위한틀(framework)을 제공함
  - 인기 있는 개념적 수준의 모델은 엔티티-관계(ER: Entity-Relationship) 모델
  - ER 모델과 같은 개념적인 데이터 모델이 사상될 수 있는 다수의 구현 데이터 모델(implementation data model)이 존재함
  - 구현 단계에서 사용되는 세 가지 데이터 모델
    - 관계 데이터 모델
    - 계층 데이터 모델
    - 네트워크 데이터 모델
- 데이터베이스 설계의 개요
  - 한 조직체의 운영과 목적을 지원하기 위해 데이터베이스를 생성하는 과정
  - 목적은 모든 주요 응용과 사용자들이 요구하는 데이터, 데이터 간의 관계를 표현하는 것
  - 데이터베이스 개발은 일반적인 프로젝트 라이프 사이클 과정을 따름
  - 훌륭한 데이터베이스 설계는 시간의 흐름에 따른 데이터의 모든 측면을 나타내고, 데이터 항목의 중복을 최소화하고, 데이터베이스에 대한 효율적인 접근을 제공하고, 이해하기 쉬워야 함
- 데이터베이스 설계 과정
  - 요구사항 분석 단계  : 요구사항 수집과 분석
  - 설계 단계
    - 개념적 설계 : ER 모델링 또는 객체 지향 모델
    - DBMS의 선정
    - 논리적 설계 : 개념적 설계를 데이터베이스 스키마로 사상
    - 스키마 정제 : 중복을 제거함 - 데이터베이스 스키마의 정규화
    - 물리적 설계 : 성능상의 문제를 고려하여 인덱스 등을 정의
    - 보안 설계 : 사용자들의 그룹과 접근 제한
  - 구현 단계 : 데이터베이스의 구축과 튜닝
- 요구사항 수집과 분석
  - 흔히 기존의 문서를 조사하고, 인터뷰나 설문 조사 등이 시행됨
  - 인터뷰는 요구사항 수집을 위해 가장 흔히 사용됨
  - 설문 조사는 자유롭게 의견을 적어내도록 하는 방식과 주어진 질문에 대해서만 답을 하는 방식으로 구분
  - 요구사항에 관한 지식을 기반으로 관련 있는 엔티티들과 이들의 애트리뷰트들이 무엇인가, 엔티티들 간의 관계가 무엇인가 등을 파악함
  - 또한 데이터 처리에 관한 요구사항에 대하여 전형적인 연산들은 무엇인가, 연산들의 의미, 접근하는 데이터의 양 등을 분석함

- 개념적 설계
  - 모든 물리적인 사항과 독립적으로, 한 조직체에서 사용되는 정보의 모델을 구축하는 과정
  - 사용자들의 요구사항 명세로부터 개념적 스키마가 만들어짐
  - 높은 추상화 수준의 데이터 모델을 기반으로 정형적인 언어로 데이터 구조를 명시함
  - 대표적인 데이터 모델이 ER 모델
  - 개념적 설계의 단계에서는 엔티티 타입, 관계 타입, 애트리뷰트들을 식별하고, 애트리뷰트들의 도메인을 결정하고, 후보 키와 기본 키 애트리뷰트들을 결정함
  - 완성된 개념적 스키마(ER 스키마)는 **ER 다이어그램**으로 표현됨
- DBMS 선정
  - 여러 가지 요인들을 검토한 후 DBMS를 선정함
  - 기술적인 요인은 DBMS가 제공하는 데이터 모델, 저장 구조, 인터페이스, 질의어, 도구, 제공되는 서비스 등
  - 정치적 요인, 경제적 요인(구입 비용, 유지보수 비용, 인건비, 교육비 등)

- 논리적 설계
  - 데이터베이스 관리를 위해 선택한 DBMS의 데이터 모델을 사용하여 논리적 스키마(외부 스키마도 포함)를 생성함
  - 개념적 스키마에 
  - 최근엔 굉장히 자동화되어 있음
- 물리적 설계
  - 처리 요구사항들을 만족시키기 위해 저장 구조와 접근 경로 등을 결정함
  - 성능상의 주요 기준
    - 응답 시간 : 질의와 갱신이 평군적으로 또는 피크 시간 떄 얼마나 오래 걸릴 것인가?
    - 트랜잭션 처리율 : 1초당 얼마나 많은 트랜잭션들이 평균적으로 또는 피크 시간 때 처리될 수 있는가
    - 전체 데이터베이스에 대한 보고서를 생성하는데 얼마나 오래 걸릴 것인가?

- 트랜잭션 설계
  - 요구사항 수집과 분석 후에 데이터베이스 설계 과정과 별도로 트랜잭션 설계를 진행할 수 있음
  - 트랜잭션은 완성될 데이터베이스에서 동작할 응용 프로그램
  - 데이터베이스 스키마는 트랜잭션에서 요구하는 모든 정보를 포함해야 함
  - 빈도수가 많은 트랜잭션을 기준으로 빠르게 처리할 수 있도록 설계해야 함
  - 검색, 갱신, 혼합 등 세 가지 유형으로 구분하여 입력과 출력, 동작 등을 식별함



## ER 모델

- ER 모델
  - 데이터베이스 설계를 용이하게 하기 위해서 P. P. Chen이 1976년에 제안하였고 그 후에 많은 학자들이 모델을 강화함
  - 현재는 EER(Enhanced Entity Relationship) 모델이 데이터베이스 설계 과정에 널리 사용되고 있음
  - 개념적 설계를 위한 인기 있는 모델로서, 높은 수준으로 추상화하며, 이해하기 쉬우며, 구문들의 표현력이 뛰어나고 사람들이 응요에 대해 생각하는 방식과 가깝고 많은 CASE 도구들에서 지원됨
  - 실세계를 엔티티, 애트리뷰트, 엔티티들 간의 관계로 표현함
  - 쉽게 관계 데이터 모델로 사상됨 
  - 기본적인 구문으로는 엔티티, 관계, 애트리뷰트가 있고, 기타 구문으로는 카디날리티 비율, 참여 제약조건 등이 있음
  - 적은 노력으로 쉽게 배울 수 있고, 전문가가 아니어도 이해하기 쉬우며, 자연어보다는 좀 더 정형적이고, 구현에 독립적이어서 데이터베이스 설계자들이 최종 사용자들과 의사 소통을 하는데 적합함
  - ER 모델을 기반으로 만들어진 다수의 CASE 도구(e.g. ERWin)들이 존재함
  - 이런 도구들은 ER 설계를 자동적으로 SQL Server, 오라클, 사이베이스 등의 데이터정의어로 변환하고, 어떤 도구는 XML로 변환함
  - 현재는 데이터베이스 설계를 위한 다소 구형 그래픽 표기법
- 엔티티
  - 하나의 엔티티는 사람, 장소, 사물, 사건 등과 같이 독립적으로 존재하면서 고유하게 식별이 가능한 실세계의 객체 
  - 사원처럼 실체가 있는 것도 있지만 생각이나 개념과 같이 추상적인 것도 있음(과목, 게시글, 댓글 등)
- 엔티티 타입
  - 엔티티들은 엔티티 타입(또는 엔티티 집합)들로 분류됨
  - 엔티티 타입은 동일한 애트리뷰트들을 가진 엔티티들의 틀
  - 엔티티 집합은 동일한 애트리뷰트들을 가진 엔티티들의 모임
  - 하나의 엔티티는 한 개 이상의 엔티티 집합에 속할 수 있음
  - 엔티티 타입은 관계 모델의 릴레이션의 내포에 해당하고, 엔티티 집합은 관계 모델의 릴레이션의 외연에 해당함
  - 엔티티 집합과 엔티티 타입을 엄격하게 구분할 필요는 없음
  - ER 다이어그램에서 엔티티 타입은 직사각형으로 나타냄